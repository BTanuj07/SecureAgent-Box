{% extends "base.html" %}

{% block page_title %}Analysis Results{% endblock %}

{% block content %}
<div class="summary-container fade-in">
    <!-- Header Section -->
    <div class="page-header">
        <div class="header-content">
            <div>
                <h1 class="page-title">Analysis Results</h1>
                <p class="page-description">View and manage all analyzed files and processes</p>
            </div>
        </div>
        
        <div class="header-actions">
            <button onclick="window.location.href='/'" class="btn btn-primary">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
                <span>New Analysis</span>
            </button>
            <button onclick="showSummaryCleanupWarning()" class="btn btn-danger">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
                <span>Clean All</span>
            </button>
            <button onclick="loadFiles()" class="btn btn-secondary">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
                <span>Refresh</span>
            </button>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon files-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Total Files</div>
                <div class="stat-value" id="totalFiles">0</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon storage-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Storage Used</div>
                <div class="stat-value" id="storageUsed">0 MB</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon risk-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                </svg>
            </div>
            <div class="stat-content">
                <div class="stat-label">Average Risk</div>
                <div class="stat-value-group">
                    <span id="averageRisk" class="risk-badge">-</span>
                    <span id="averageEntropy" class="stat-meta">Entropy: -</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Analysis Type Tabs -->
    <div class="analysis-tabs">
        <button class="tab-btn active" onclick="switchAnalysisType('payloads')" id="payloadsTab">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
            <span>Payloads</span>
            <span class="tab-count" id="payloadsCount">0</span>
        </button>
        
        <button class="tab-btn" onclick="switchAnalysisType('drivers')" id="driversTab">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
            </svg>
            <span>Drivers</span>
            <span class="tab-count" id="driversCount">0</span>
        </button>
        
        <button class="tab-btn" onclick="switchAnalysisType('processes')" id="processesTab">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/>
            </svg>
            <span>Processes</span>
            <span class="tab-count" id="processesCount">0</span>
        </button>
    </div>

    <!-- Filters and Search -->
    <div class="filters-section card">
        <div class="search-box">
            <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
            <input type="text" id="searchFiles" placeholder="Search files..." class="search-input"/>
        </div>
        
        <div class="filter-group">
            <select id="filterType" class="filter-select">
                <option value="all">All Types</option>
                <option value="exe">.exe</option>
                <option value="dll">.dll</option>
                <option value="bin">.bin</option>
                <option value="docx">.docx</option>
                <option value="xlsx">.xlsx</option>
                <option value="lnk">.lnk</option>
                <option value="sys">.sys</option>
            </select>
            
            <select id="filterRisk" class="filter-select">
                <option value="all">All Risks</option>
                <option value="critical">Critical</option>
                <option value="high">High</option>
                <option value="medium">Medium</option>
                <option value="low">Low</option>
            </select>
            
            <select id="sortBy" class="filter-select">
                <option value="newest">Newest First</option>
                <option value="oldest">Oldest First</option>
                <option value="name">Name</option>
                <option value="size">Size</option>
                <option value="risk">Risk Score</option>
            </select>
        </div>
    </div>

    <!-- Results Table -->
    <div class="card results-table-card">
        <div class="table-container">
            <table class="results-table">
                <thead>
                    <tr>
                        <th>File Name</th>
                        <th>Risk Level</th>
                        <th>Size</th>
                        <th>Upload Date</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="fileList">
                    <!-- Rows will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
        
        <!-- Empty State -->
        <div id="emptyState" class="hidden empty-state">
            <div class="empty-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
            </div>
            <h3>No files found</h3>
            <p>Upload a file to get started with analysis</p>
            <button onclick="window.location.href='/'" class="btn btn-primary">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
                <span>Upload File</span>
            </button>
        </div>
    </div>
</div>

<!-- Cleanup Warning Modal -->
<div id="summaryCleanupWarningModal" class="modal-overlay hidden">
    <div class="modal-container">
        <div class="modal-header">
            <div class="modal-icon danger-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
            </div>
            <div>
                <h3>System Cleanup</h3>
                <p>Remove all analysis data</p>
            </div>
        </div>
        
        <div class="modal-body">
            <div class="alert alert-danger">
                <svg class="alert-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <div>
                    <strong>Warning!</strong>
                    <p>This will permanently remove all uploaded files and analysis results. This action cannot be undone.</p>
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button onclick="hideSummaryCleanupWarning()" class="btn btn-secondary">Cancel</button>
            <button onclick="cleanupFiles()" class="btn btn-danger">Proceed with Cleanup</button>
        </div>
    </div>
</div>

<!-- File Row Template -->
<template id="fileRowTemplate">
    <tr>
        <td class="py-4 px-6">
            <div class="flex flex-col">
                <span data-field="fileName" class="text-gray-200 font-medium"></span>
                <span data-field="fileHash" class="text-sm text-gray-500 font-mono"></span>
            </div>
        </td>
        <td class="px-6">
            <div class="flex flex-col">
                <span data-field="fileRisk"></span>
                <span data-field="fileEntropy" class="text-xs text-gray-400 mt-1"></span>
            </div>
        </td>
        <td class="text-center px-6">
            <span data-field="fileSize" class="text-gray-400"></span>
        </td>
        <td class="text-center px-6">
            <span data-field="fileUploadDate" class="text-gray-400"></span>
        </td>
        <td class="text-center px-6">
            <span data-field="fileAnalysisStatus"></span>
        </td>
        <td class="px-6">
            <div class="flex justify-end space-x-2">
                <button data-action="view" class="p-2 text-gray-400 hover:text-blue-500 rounded-lg hover:bg-blue-500/10 transition-colors" title="View Results">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                </button>
                <button data-action="report" class="p-2 text-gray-400 hover:text-purple-500 rounded-lg hover:bg-purple-500/10 transition-colors" title="Download Report">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                </button>
                <button data-action="delete" class="p-2 text-gray-400 hover:text-red-500 rounded-lg hover:bg-red-500/10 transition-colors" title="Delete">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                </button>
            </div>
        </td>
    </tr>
</template>

<!-- Driver Row Template -->
<template id="driverRowTemplate">
    <tr>
        <td class="py-4 px-6">
            <div class="flex flex-col">
                <span data-field="driverName" class="text-gray-200 font-medium"></span>
                <span data-field="driverHash" class="text-sm text-gray-500 font-mono"></span>
            </div>
        </td>
        <td class="px-6">
            <span data-field="driverRisk"></span>
        </td>
        <td class="text-center px-6">
            <span data-field="driverSize" class="text-gray-400"></span>
        </td>
        <td class="text-center px-6">
            <span data-field="driverUploadDate" class="text-gray-400"></span>
        </td>
        <td class="text-center px-6">
            <span data-field="driverAnalysisStatus"></span>
        </td>
        <td class="px-6">
            <div class="flex justify-end space-x-2">
                <button data-action="view" class="p-2 text-gray-400 hover:text-blue-500 rounded-lg hover:bg-blue-500/10 transition-colors" title="View Results">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                </button>
                <button data-action="report" class="p-2 text-gray-400 hover:text-purple-500 rounded-lg hover:bg-purple-500/10 transition-colors" title="Download Report">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                </button>
                <button data-action="delete" class="p-2 text-gray-400 hover:text-red-500 rounded-lg hover:bg-red-500/10 transition-colors" title="Delete">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                </button>
            </div>
        </td>
    </tr>
</template>

<!-- Process Row Template -->
<template id="processRowTemplate">
    <tr>
        <td class="py-4 px-6">
            <div class="flex flex-col">
                <span data-field="processName" class="text-gray-200 font-medium"></span>
                <span data-field="processPath" class="text-sm text-gray-500"></span>
            </div>
        </td>
        <td class="px-6">
            <span data-field="pid" class="text-gray-200 font-mono"></span>
        </td>
        <td class="text-center px-6">
            <span data-field="processArch" class="text-gray-400"></span>
        </td>
        <td class="px-6">
            <span data-field="processRisk"></span>
        </td>
        <td class="px-6">
            <div class="flex justify-end space-x-2">
                <button data-action="view" class="p-2 text-gray-400 hover:text-blue-500 rounded-lg hover:bg-blue-500/10 transition-colors" title="View Results">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                </button>
                <button data-action="report" class="p-2 text-gray-400 hover:text-purple-500 rounded-lg hover:bg-purple-500/10 transition-colors" title="Download Report">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                </button>
                <button data-action="delete" class="p-2 text-gray-400 hover:text-red-500 rounded-lg hover:bg-red-500/10 transition-colors" title="Delete">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                </button>
            </div>
        </td>
    </tr>
</template>

<!-- File Delete Warning Modal -->
<div id="fileDeleteWarningModal" class="modal-overlay hidden">
    <div class="modal-container">
        <div class="modal-header">
            <div class="modal-icon danger-icon">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
            </div>
            <div>
                <h3>Delete File</h3>
                <p>Remove file and analysis data</p>
            </div>
        </div>
        
        <div class="modal-body">
            <div class="alert alert-warning">
                <svg class="alert-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                </svg>
                <span>This will permanently remove the selected file and its analysis data.</span>
            </div>
        </div>
        
        <div class="modal-footer">
            <button onclick="hideFileDeleteWarning()" class="btn btn-secondary">Cancel</button>
            <button id="confirmDeleteButton" class="btn btn-danger">Delete</button>
        </div>
    </div>
</div>

<style>
.summary-container {
    max-width: 1600px;
    margin: 0 auto;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.stat-card {
    background: var(--bg-card);
    border: 1px solid var(--border-secondary);
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all var(--transition-base);
}

.stat-card:hover {
    border-color: var(--border-primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.stat-icon {
    width: 56px;
    height: 56px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.stat-icon svg {
    width: 28px;
    height: 28px;
}

.files-icon {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(124, 58, 237, 0.1));
    border: 1px solid rgba(139, 92, 246, 0.3);
    color: var(--primary);
}

.storage-icon {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1));
    border: 1px solid rgba(59, 130, 246, 0.3);
    color: var(--secondary);
}

.risk-icon {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.1));
    border: 1px solid rgba(245, 158, 11, 0.3);
    color: var(--warning);
}

.stat-content {
    flex: 1;
}

.stat-label {
    font-size: 0.875rem;
    color: var(--text-muted);
    margin-bottom: 0.25rem;
}

.stat-value {
    font-size: 1.875rem;
    font-weight: 700;
    color: var(--text-primary);
}

.stat-value-group {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.stat-meta {
    font-size: 0.75rem;
    color: var(--text-muted);
}

.analysis-tabs {
    display: flex;
    gap: 0.5rem;
    padding: 0.5rem;
    background: var(--bg-card);
    border: 1px solid var(--border-secondary);
    border-radius: 12px;
    margin-bottom: 1.5rem;
}

.tab-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 8px;
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.tab-btn svg {
    width: 18px;
    height: 18px;
}

.tab-count {
    padding: 0.125rem 0.5rem;
    background: rgba(148, 163, 184, 0.1);
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
}

.tab-btn:hover {
    background: var(--bg-hover);
    color: var(--primary);
}

.tab-btn.active {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(59, 130, 246, 0.1));
    border-color: var(--border-primary);
    color: var(--primary);
}

.tab-btn.active .tab-count {
    background: rgba(139, 92, 246, 0.2);
    color: var(--primary);
}

.filters-section {
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.search-box {
    flex: 1;
    position: relative;
}

.search-icon {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    color: var(--text-muted);
    pointer-events: none;
}

.search-input {
    width: 100%;
    padding: 0.75rem 1rem 0.75rem 3rem;
    background: rgba(30, 41, 59, 0.6);
    border: 1px solid var(--border-secondary);
    border-radius: 10px;
    color: var(--text-primary);
    font-size: 0.875rem;
    transition: all var(--transition-fast);
}

.search-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
}

.filter-group {
    display: flex;
    gap: 0.75rem;
}

.filter-select {
    padding: 0.75rem 1rem;
    background: rgba(30, 41, 59, 0.6);
    border: 1px solid var(--border-secondary);
    border-radius: 10px;
    color: var(--text-primary);
    font-size: 0.875rem;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.filter-select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
}

.results-table-card {
    padding: 0;
    overflow: hidden;
}

.table-container {
    overflow-x: auto;
}

.results-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
}

.results-table thead tr {
    background: linear-gradient(90deg, rgba(139, 92, 246, 0.05) 0%, transparent 100%);
}

.results-table th {
    padding: 1rem 1.5rem;
    text-align: left;
    font-weight: 600;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--primary);
    border-bottom: 2px solid var(--border-primary);
}

.results-table td {
    padding: 1rem 1.5rem;
    border-bottom: 1px solid var(--border-secondary);
    color: var(--text-secondary);
}

.results-table tbody tr {
    transition: all var(--transition-fast);
}

.results-table tbody tr:hover {
    background: var(--bg-hover);
}

.empty-state {
    padding: 4rem 2rem;
    text-align: center;
}

.empty-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 1.5rem;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(59, 130, 246, 0.1));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.empty-icon svg {
    width: 40px;
    height: 40px;
    color: var(--primary);
}

.empty-state h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 0.5rem 0;
}

.empty-state p {
    font-size: 0.875rem;
    color: var(--text-muted);
    margin: 0 0 1.5rem 0;
}

.hidden {
    display: none !important;
}
</style>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/summary.js') }}"></script>
<script>
function switchAnalysisType(type) {
    // Update active tab
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById(type + 'Tab').classList.add('active');
    
    // Filter results based on type
    // This will be implemented in summary.js
    console.log('Switching to:', type);
}

function showSummaryCleanupWarning() {
    document.getElementById('summaryCleanupWarningModal').classList.remove('hidden');
}

function hideSummaryCleanupWarning() {
    document.getElementById('summaryCleanupWarningModal').classList.add('hidden');
}

function hideFileDeleteWarning() {
    document.getElementById('fileDeleteWarningModal').classList.add('hidden');
}

function cleanupFiles() {
    // Implementation in summary.js
    console.log('Cleanup initiated');
}
</script>
{% endblock %}
