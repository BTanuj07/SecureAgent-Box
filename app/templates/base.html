<!DOCTYPE html>
{% set favicon_url = url_for('static', filename='favicon.svg') %}
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>{{ config.application.name }} - Malware Analysis Platform</title>
    <link rel="icon" type="image/svg+xml" href="{{ favicon_url }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tailwind.min.css') }}"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"/>
</head>
<body>
    <!-- Particle Background -->
    <div class="particles-bg"></div>

    <!-- Top Navigation Bar -->
    <nav class="top-navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <img src="{{ favicon_url }}" alt="Logo" class="brand-logo"/>
                <div class="brand-text">
                    <h1>{{ config.application.name }}</h1>
                    <span>Malware Analysis Platform</span>
                </div>
            </div>
            
            <div class="navbar-menu">
                <a href="/" class="nav-link">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                    <span>Home</span>
                </a>
                
                <a href="/summary" class="nav-link">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                    <span>Results</span>
                </a>
                
                <a href="/doppelganger" class="nav-link">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                    </svg>
                    <span>Doppelganger</span>
                </a>
                
                <button onclick="showProcessWarning()" class="nav-link">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/>
                    </svg>
                    <span>Process</span>
                </button>
            </div>
            
            <div class="navbar-actions">
                <div class="status-badge">
                    <div id="status-indicator" class="status-dot"></div>
                    <span id="status-text">Checking...</span>
                </div>
                
                <button onclick="cleanupSystem()" class="action-btn" title="Cleanup System">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="content-wrapper">
            {% block content %}{% endblock %}
        </div>
    </main>

    <!-- Process Analysis Modal -->
    <div id="processWarningModal" class="modal-overlay hidden">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-icon process-icon">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"/>
                    </svg>
                </div>
                <div>
                    <h3>Process Analysis</h3>
                    <p>Analyze a running process by PID</p>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="form-group">
                    <label for="processId">Process ID (PID)</label>
                    <input type="number" id="processId" placeholder="Enter process ID" class="form-input"/>
                </div>
                <div class="alert alert-warning">
                    <svg class="alert-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                    <span>This will perform dynamic analysis on the running process</span>
                </div>
            </div>
            
            <div class="modal-footer">
                <button onclick="hideProcessWarning()" class="btn btn-secondary">Cancel</button>
                <button onclick="startProcessAnalysis()" class="btn btn-primary">Start Analysis</button>
            </div>
        </div>
    </div>

    <!-- Cleanup Warning Modal -->
    <div id="cleanupWarningModal" class="modal-overlay hidden">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-icon danger-icon">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                </div>
                <div>
                    <h3>System Cleanup</h3>
                    <p>Remove all analysis data</p>
                </div>
            </div>
            
            <div class="modal-body">
                <div class="alert alert-danger">
                    <svg class="alert-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <div>
                        <strong>Warning!</strong>
                        <p>This will permanently remove all uploaded files and analysis results. This action cannot be undone.</p>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button onclick="hideCleanupWarning()" class="btn btn-secondary">Cancel</button>
                <button onclick="executeCleanup()" class="btn btn-danger">Proceed with Cleanup</button>
            </div>
        </div>
    </div>

    {% block scripts %}{% endblock %}
    <script src="{{ url_for('static', filename='js/base.js') }}"></script>
</body>
</html>
